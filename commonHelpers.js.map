{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = `44770113-cb4279c01992ac20f8c79d080`;\n\nexport async function getImages(inputText, page) {\n    const promiseValue =  //  при необхідності ліміту фото можна додати &_limit=9\n        await axios.get(`https://pixabay.com/api/?key=${API_KEY}&q=${inputText}&page=${page}&per_page=15`)  //  використання бібліотеки axios + return для отримання масиву\n        .then((response) => response.data)  //  отриманий масив з data.hits\n        .catch((error) => console.log(\"error\", error))\n    return promiseValue;\n}\n\n","const gallery = document.querySelector(\".gallery\");\n\nexport function createMarcup(arr) {\n    // console.log(\"arr\", arr)  //  перевірка вхідного аргументу\n\n    const marcup =  arr.map(\n        ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n        <li class=\"container-list\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"img-list\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <ul class=\"container-card\">\n                <li class=\"list-card\">\n                    <p class=\"likes-card\">Likes</p>\n                    <p class=\"number-likes\">${likes}</p>\n                </li>\n                <li class=\"list-card\">\n                    <p class=\"views-card\">Views</p>\n                    <p class=\"number-views\">${views}</p>\n                </li>\n                <li class=\"list-card\">\n                    <p class=\"comments-card\">comments</p>\n                    <p class=\"number-comments\">${comments}</p>\n                </li>\n                <li class=\"list-card\">\n                    <p class=\"downloads-card\">downloads</p>\n                    <p class=\"number-downloads\">${downloads}</p>\n                </li>\n            </ul>\n        </img>\n        </a>\n    </li>\n    `).join(``)\n\n    gallery.insertAdjacentHTML(\"beforeend\", marcup);  //  ф-ція виклику створення скелету розмітки\n}","//  Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n//  Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { createMarcup } from \"./js/render-functions\"\n\nconst formSearch = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst buttonLoad = document.querySelector(\".button-load\");\nconst loading = document.querySelector(\".loading\")\n\n\nlet inputText = \"\";\nlet page;\nlet userPhoto = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n});\n\n\nformSearch.addEventListener(`submit`, handlerSubmit);\n\nasync function handlerSubmit(event) {\n    event.preventDefault();\n    page = 1;\n    const form = event.target;  \n    // console.log(\"form\", form);  //  перевірка доступу до форми\n    inputText = (form.elements.input.value).trim();\n    // console.log(\"inputText\", inputText);  //  перевірка отриманого значення input\n    loadingTextRemove(); //  додавання інформації про завантаження\n    if (inputText === \"\") {\n        loadingTextAdd();\n        return iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: `topCenter`,\n                progressBarColor: `rgb(255,0,0)`\n            });\n    }\n\n    try {\n        const data = await getImages(inputText, page)\n        if (Number(data.length) === 0) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: `topCenter`,\n                progressBarColor: `rgb(255,0,0)`\n            });\n        } else {\n            gallery.innerHTML = \"\";  //  очистка попереднього контенту\n            createMarcup(data.hits);\n            userPhoto.refresh();  //  виклик та можливість зміни фото в модальному вікні\n                \n            // console.log(\"page=\", page);  //  перевірка лічильника сторінки\n            if (data.hits.length > 14) {  //  перевірка умави на довжину отриманного масиву\n                // console.log(\"page=\", page);  //  перевірка лічильника сторінок\n                buttonRemove();  //   активація кнопки\n            } else {\n                buttontAdd();  //  приховування кнопки\n                iziToast.show({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: `topCenter`,\n                    progressBarColor: `rgb(255,0,0)`\n                });\n            }\n        }\n        \n    } catch (error) {\n        console.log(\"error\", error)\n    }\n    finally{\n        loadingTextAdd(); //  видалення інформації про завантаження\n        form.reset()\n    }\n}\n\n\nbuttonLoad.addEventListener(`click`, getImagesLoad)\n\nfunction getImagesLoad() {\n    page += 1;\n    loadingTextRemove();   //  додавання інформації про завантаження\n    // console.log(\"page=\", page);  перевірка лічильника сторінок\n    getImages(inputText, page)\n        .then((data) => {\n            // gallery.innerHTML = \"\";  //  якщо не потрібен скрол, то очистка попереднього контенту\n            loadingTextAdd();  //  видалення інформації про завантаження\n            createMarcup(data.hits);\n            if (data.hits.length > 14) {  //  перевірка умави на довжину отриманного масиву\n                // console.log(\"page=\", page);  //  перевірка лічильника сторінок\n                buttonRemove();  //   активація кнопки\n            } else {\n                buttontAdd();  //  приховування кнопки\n                iziToast.show({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: `topCenter`,\n                    progressBarColor: `rgb(255,0,0)`\n                });\n            }\n            // console.log(\"data\", data.hits) //  перевірка отриманного масиву\n            const containerСard = document.querySelector(\".container-list\");\n            const heigthCard = containerСard.getBoundingClientRect().height;\n            // console.log(\"heigthCard\", heigthCard)  //  перевірка прокрутки\n            window.scrollBy({\n                top: heigthCard * 2.6,\n                behavior: \"smooth\",\n              });\n        })\n}\n\n\nfunction loadingTextRemove(){   //  ф-ція додавання loading\n    loading.classList.remove(\"hidden\")\n}\n\nfunction loadingTextAdd(){      //  ф-ція приховування loading\n    loading.classList.add(\"hidden\")\n}\n\nfunction buttonRemove(){   //  ф-ція додавання кнопки Load more\n    buttonLoad.classList.remove(\"hidden\")\n}\n\nfunction buttontAdd(){      //  ф-ція приховування кнопки Load more\n    buttonLoad.classList.add(\"hidden\")\n}\n"],"names":["API_KEY","getImages","inputText","page","axios","response","error","gallery","createMarcup","arr","marcup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","buttonLoad","loading","userPhoto","SimpleLightbox","handlerSubmit","event","form","loadingTextRemove","loadingTextAdd","iziToast","data","buttonRemove","buttontAdd","getImagesLoad","heigthCard"],"mappings":"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"}