{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = `44770113-cb4279c01992ac20f8c79d080`;\n\nexport async function getImages(inputText, page) {\n    const promiseValue =  //  при необхідності ліміту фото можна додати &_limit=9\n        await axios.get(`https://pixabay.com/api/?key=${API_KEY}&q=${inputText}&page=${page}`)  //  використання бібліотеки axios + return для отримання масиву\n        .then((response) => response.data)  //  отриманий масив з data.hits\n        .catch((error) => console.log(\"error\", error))\n    return promiseValue;\n}\n\n","const gallery = document.querySelector(\".gallery\");\n\nexport function createMarcup(arr) {\n    // console.log(\"arr\", arr)  //  перевірка вхідного аргументу\n\n    const marcup =  arr.map(\n        ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n        <li class=\"container-list\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"img-list\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <ul class=\"container-cart\">\n                <li class=\"list-cart\">\n                    <p class=\"likes-cart\">Likes</p>\n                    <p class=\"number-likes\">${likes}</p>\n                </li>\n                <li class=\"list-cart\">\n                    <p class=\"views-cart\">Views</p>\n                    <p class=\"number-views\">${views}</p>\n                </li>\n                <li class=\"list-cart\">\n                    <p class=\"comments-cart\">comments</p>\n                    <p class=\"number-comments\">${comments}</p>\n                </li>\n                <li class=\"list-cart\">\n                    <p class=\"downloads-cart\">downloads</p>\n                    <p class=\"number-downloads\">${downloads}</p>\n                </li>\n            </ul>\n        </img>\n        </a>\n    </li>\n    `).join(``)\n\n    gallery.insertAdjacentHTML(\"beforeend\", marcup);  //  ф-ція виклику створення скелету розмітки\n}","//  Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n//  Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { createMarcup } from \"./js/render-functions\"\n\nconst formSearch = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst buttonLoad = document.querySelector(\".button-load\");\n\nlet inputText = \"\";\nlet page;\nlet userPhoto = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n});\n\nformSearch.addEventListener(`submit`, handlerSubmit);\n\nfunction handlerSubmit(event) {\n    event.preventDefault();\n    page = 1;\n    const form = event.target;  \n    // console.log(\"form\", form);  //  перевірка доступу до форми\n    inputText = (form.elements.input.value).trim();\n    // console.log(\"inputText\", inputText);  //  перевірка отриманого значення input\n    if (inputText === \"\") {\n        return\n    } else {\n        getImages(inputText, page)\n            .then((data) => {\n                // console.log(\"data\", data.hits) //  перевірка отриманного масиву\n                // console.log(\"total\", data.total) //  перевірка отриманного масиву\n                if (Number(data.length) === 0) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: `topCenter`,\n                progressBarColor: `rgb(255,0,0)`\n            });\n                } else {\n                    gallery.innerHTML = \"\";  //  очистка попереднього контенту\n                    createMarcup(data.hits);\n                    userPhoto.refresh();  //  виклик та можливість зміни фото в модальному вікні\n                }\n                console.log(\"page=\", page);\n                if (data.hits.length > 8) {  //  перевірка умави на довжину отриманного масиву\n                    // console.log(\"page=\", page);  //  перевірка лічильника сторінок\n                    buttonLoad.style.display = \"block\";  //   активація кнопки\n                } else {\n                    buttonLoad.style.display = \"none\";  //  приховування кнопки\n                    iziToast.show({\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        position: `topCenter`,\n                        progressBarColor: `rgb(255,0,0)`\n                });\n                }\n            })\n            .catch((error) => console.log(\"error\", error))\n    }\n    form.reset();\n}\n\n\nbuttonLoad.addEventListener(`click`, getImagesLoad)\n\nfunction getImagesLoad() {\n    page += 1;\n    // console.log(\"page=\", page);  перевірка лічильника сторінок\n    getImages(inputText, page)\n        .then((data) => {\n            // gallery.innerHTML = \"\";  //  якщо не потрібен скрол, то очистка попереднього контенту\n            createMarcup(data.hits);\n            // console.log(\"data\", data.hits) //  перевірка отриманного масиву\n        })\n}\n\nconst scrollCart = document.documentElement.getBoundingClientRect();\n\nwindow.scrollBy(0, scrollCart.bottom);\nconsole.log(\"top\", scrollCart.top, \"bottom\", scrollCart.bottom);\n\n// window.addEventListener(`scroll`, scrollListener)\n\n\n// function scrollListener() {\n//     const scrollCart = document.documentElement.getBoundingClientRect();\n//     console.log(\"top\", scrollCart.top, \"bottom\", scrollCart.bottom)\n//     if (scrollCart.bottom < document.documentElement.clientHeight + 400) {\n//        console.log(`Bottom`) \n//     }\n// }\n\n"],"names":["API_KEY","getImages","inputText","page","axios","response","error","gallery","createMarcup","arr","marcup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","buttonLoad","userPhoto","SimpleLightbox","handlerSubmit","event","form","data","iziToast","getImagesLoad","scrollCart"],"mappings":"owBAEA,MAAMA,EAAU,qCAET,eAAeC,EAAUC,EAAWC,EAAM,CAK7C,OAHI,MAAMC,EAAM,IAAI,gCAAgCJ,CAAO,MAAME,CAAS,SAASC,CAAI,EAAE,EACpF,KAAME,GAAaA,EAAS,IAAI,EAChC,MAAOC,GAAU,QAAQ,IAAI,QAASA,CAAK,CAAC,CAErD,CCVA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAaC,EAAK,CAG9B,MAAMC,EAAUD,EAAI,IAChB,CAAC,CAAC,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA;AAAA,4CAExCL,CAAa;AAAA,yCAChBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,8CAIrBC,CAAK;AAAA;AAAA;AAAA;AAAA,8CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iDAIFC,CAAQ;AAAA;AAAA;AAAA;AAAA,kDAIPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMtD,EAAE,KAAK,EAAE,EAEVV,EAAQ,mBAAmB,YAAaG,CAAM,CAClD,CCrBA,MAAMQ,EAAa,SAAS,cAAc,OAAO,EAC3CX,EAAU,SAAS,cAAc,UAAU,EAC3CY,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIjB,EAAY,GACZC,EACAiB,EAAY,IAAIC,EAAe,aAAc,CAC7C,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAC,EAEDH,EAAW,iBAAiB,SAAUI,CAAa,EAEnD,SAASA,EAAcC,EAAO,CAC1BA,EAAM,eAAc,EACpBpB,EAAO,EACP,MAAMqB,EAAOD,EAAM,OAEnBrB,EAAasB,EAAK,SAAS,MAAM,MAAO,OAEpCtB,IAAc,KAGdD,EAAUC,EAAWC,CAAI,EACpB,KAAMsB,GAAS,CAGR,OAAOA,EAAK,MAAM,IAAM,EAChCC,EAAS,KAAK,CACV,QAAS,2EACT,SAAU,YACV,iBAAkB,cAClC,CAAa,GAEOnB,EAAQ,UAAY,GACpBC,EAAaiB,EAAK,IAAI,EACtBL,EAAU,QAAO,GAErB,QAAQ,IAAI,QAASjB,CAAI,EACrBsB,EAAK,KAAK,OAAS,EAEnBN,EAAW,MAAM,QAAU,SAE3BA,EAAW,MAAM,QAAU,OAC3BO,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,YACV,iBAAkB,cAC1C,CAAiB,EAEjB,CAAa,EACA,MAAOpB,GAAU,QAAQ,IAAI,QAASA,CAAK,CAAC,EAErDkB,EAAK,MAAK,EACd,CAGAL,EAAW,iBAAiB,QAASQ,CAAa,EAElD,SAASA,GAAgB,CACrBxB,GAAQ,EAERF,EAAUC,EAAWC,CAAI,EACpB,KAAMsB,GAAS,CAEZjB,EAAaiB,EAAK,IAAI,CAElC,CAAS,CACT,CAEA,MAAMG,EAAa,SAAS,gBAAgB,wBAE5C,OAAO,SAAS,EAAGA,EAAW,MAAM,EACpC,QAAQ,IAAI,MAAOA,EAAW,IAAK,SAAUA,EAAW,MAAM"}